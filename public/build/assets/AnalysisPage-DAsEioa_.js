import{h as x,y as w,c as n,b as e,l as M,a as z,i as a,j as A,k as g,v as L,z as S,f as c,e as C,q as b,t as l,A as y,F as v,x as p,g as i}from"./app-wbJa4e37.js";import{b as j}from"./client-zeXxvwEL.js";const B={class:"min-h-screen"},T={class:"border-b border-white/10 backdrop-blur-lg bg-white/5"},R={class:"container mx-auto px-4 py-4"},F={class:"flex items-center gap-4"},I={class:"container mx-auto px-4 py-8"},D={class:"card mb-8"},E={class:"grid md:grid-cols-2 gap-6"},H=["disabled"],N={key:0,class:"flex items-center justify-center gap-2"},U={key:1,class:"flex items-center justify-center gap-2"},V={key:0,class:"card p-8"},$={key:1,class:"space-y-6"},P={class:"grid md:grid-cols-3 gap-8 p-8"},G={class:"text-center"},q={key:0,class:"w-16 h-16 text-green-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},K={key:1,class:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},O={key:2,class:"w-16 h-16 text-yellow-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={class:"text-3xl font-bold mb-2"},Y={class:"text-center"},J={class:"text-5xl font-bold mb-2"},Q={class:"w-full bg-white/10 rounded-full h-3"},X={class:"text-center"},Z={class:"font-semibold"},ee={class:"card"},te={class:"grid md:grid-cols-4 gap-4"},se={class:"p-4 rounded-lg bg-white/5 border border-white/10"},le={class:"text-2xl font-bold"},oe={class:"p-4 rounded-lg bg-white/5 border border-white/10"},ne={class:"text-2xl font-bold"},ie={class:"p-4 rounded-lg bg-white/5 border border-white/10"},re={class:"text-2xl font-bold"},ae={class:"p-4 rounded-lg bg-red-500/20 border border-red-500/30"},de={class:"text-2xl font-bold text-red-400"},ue={class:"grid md:grid-cols-3 gap-6"},me={class:"card"},ce={class:"text-gray-300 text-sm leading-relaxed"},ve={class:"card"},pe={class:"text-gray-300 text-sm leading-relaxed"},xe={class:"card"},be={class:"text-gray-300 text-sm leading-relaxed"},ge={key:0,class:"card"},ye={class:"grid md:grid-cols-2 gap-6"},_e={class:"text-3xl font-bold text-purple-400"},he={class:"text-sm text-gray-400 mt-2"},fe={class:"text-gray-300 text-sm"},ke={key:1,class:"card"},we={class:"space-y-3"},Me={class:"flex-shrink-0 w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 font-bold"},ze={class:"flex-1"},Ae={class:"font-semibold text-white mb-1"},Le={class:"text-sm text-gray-400 mb-2"},Se={class:"flex items-center gap-2"},Ce={class:"flex-1 bg-white/10 rounded-full h-2"},je={class:"text-xs text-gray-500"},Be={key:2,class:"card"},Te={class:"grid md:grid-cols-2 gap-6"},Re={key:0},Fe={class:"space-y-2"},Ie={class:"text-sm text-gray-400"},De={class:"font-semibold text-red-400"},Ee={key:1},He={class:"space-y-2"},Ne={class:"text-sm text-gray-400"},Ue={class:"font-semibold text-green-400"},Ve={key:3,class:"card"},$e={class:"space-y-3"},Pe={class:"flex items-start justify-between mb-2"},Ge={class:"font-semibold text-white"},qe={class:"flex items-center gap-4 text-sm"},Ke={class:"text-purple-400"},Oe={class:"text-gray-400"},We={key:4,class:"card"},Ye={class:"space-y-2"},Je={class:"text-gray-300 text-sm"},Qe={class:"card"},Xe={class:"text-gray-300 leading-relaxed whitespace-pre-line"},Ze={key:5,class:"card bg-yellow-500/10 border-yellow-500/30"},et={class:"text-yellow-200 leading-relaxed"},tt={class:"card bg-white/5"},st={class:"grid md:grid-cols-3 gap-4 text-sm"},lt={class:"font-semibold"},ot={class:"font-semibold"},nt={class:"font-semibold"},it={class:"font-semibold"},rt={class:"font-semibold"},at={class:"font-semibold"},ct={__name:"AnalysisPage",setup(dt){const _=z(),h=w(),d=x({symbol:h.query.symbol||"",timeHorizon:"medium_term"}),u=x(!1),s=x(null);function f(m){if(!m)return"N/A";try{return new Date(m).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid date"}}async function k(){var m;if(d.value.symbol){u.value=!0,s.value=null;try{const t=await j.generate({symbol:d.value.symbol.toUpperCase(),time_horizon:d.value.timeHorizon});s.value=t.data}catch(t){console.error("Analysis failed:",t);const o=t.userMessage||t.message||"Analysis failed. Please try again.";((m=t.response)==null?void 0:m.status)===429||o.includes("rate")||o.includes("wait"),alert(o)}finally{u.value=!1}}}return(m,t)=>(i(),n("div",B,[e("header",T,[e("div",R,[e("div",F,[e("button",{onClick:t[0]||(t[0]=o=>M(_).back()),class:"text-white hover:text-purple-400"},[...t[3]||(t[3]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),t[4]||(t[4]=e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]),e("h1",{class:"text-2xl font-bold"},"AI Analysis")],-1))])])]),e("div",I,[e("div",D,[t[10]||(t[10]=e("h2",{class:"text-xl font-bold mb-6"},"Generate Market Analysis",-1)),e("form",{onSubmit:A(k,["prevent"]),class:"space-y-6"},[e("div",E,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium mb-2"},"Symbol",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>d.value.symbol=o),placeholder:"e.g., BTC, AAPL, EUR/USD",required:"",class:"input",list:"instruments"},null,512),[[L,d.value.symbol]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium mb-2"},"Time Horizon",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>d.value.timeHorizon=o),class:"input"},[...t[6]||(t[6]=[e("option",{value:"short_term"},"Short Term (1-4 weeks)",-1),e("option",{value:"medium_term"},"Medium Term (1-3 months)",-1),e("option",{value:"long_term"},"Long Term (3-12 months)",-1)])],512),[[S,d.value.timeHorizon]])])]),e("button",{type:"submit",disabled:u.value,class:"btn-primary w-full"},[u.value?(i(),n("span",N,[...t[8]||(t[8]=[e("div",{class:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"},null,-1),c(" Generating Analysis... ",-1)])])):(i(),n("span",U,[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})],-1),c(" Generate AI Analysis ",-1)])]))],8,H)],32)]),u.value?(i(),n("div",V,[...t[11]||(t[11]=[C('<div class="flex flex-col items-center space-y-4"><div class="animate-spin w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full"></div><div class="text-center"><h3 class="text-xl font-semibold mb-2">Analyzing Market Data...</h3><p class="text-gray-400">Computing 40+ technical indicators, analyzing sentiment, and generating AI insights</p></div></div>',1)])])):a("",!0),s.value&&!u.value?(i(),n("div",$,[e("div",{class:b(["card border-2",s.value.recommendation==="BUY"?"border-green-500 bg-green-500/10":s.value.recommendation==="SELL"?"border-red-500 bg-red-500/10":"border-yellow-500 bg-yellow-500/10"])},[e("div",P,[e("div",G,[s.value.recommendation==="BUY"?(i(),n("svg",q,[...t[12]||(t[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)])])):s.value.recommendation==="SELL"?(i(),n("svg",K,[...t[13]||(t[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)])])):(i(),n("svg",O,[...t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)])])),e("h3",W,l(s.value.recommendation),1),t[15]||(t[15]=e("p",{class:"text-gray-400"},"Recommendation",-1))]),e("div",Y,[e("div",J,l((s.value.confidence*100).toFixed(1))+"%",1),t[16]||(t[16]=e("p",{class:"text-gray-400 mb-4"},"Confidence Level",-1)),e("div",Q,[e("div",{class:"bg-purple-500 h-3 rounded-full transition-all",style:y({width:`${s.value.confidence*100}%`})},null,4)])]),e("div",X,[e("div",{class:b(["inline-flex items-center gap-2 px-4 py-2 rounded-full mb-4",s.value.risk_level==="LOW"?"bg-green-500/20 text-green-400":s.value.risk_level==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"])},[t[17]||(t[17]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)),e("span",Z,l(s.value.risk_level)+" RISK",1)],2),t[18]||(t[18]=e("p",{class:"text-gray-400"},"Risk Assessment",-1))])])],2),e("div",ee,[t[23]||(t[23]=e("h3",{class:"text-xl font-bold mb-6 flex items-center gap-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),c(" Price Targets ")],-1)),e("div",te,[e("div",se,[t[19]||(t[19]=e("p",{class:"text-sm text-gray-400 mb-2"},"Near Term",-1)),e("p",le,"$"+l(s.value.price_targets.near_term.toFixed(2)),1)]),e("div",oe,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-400 mb-2"},"Medium Term",-1)),e("p",ne,"$"+l(s.value.price_targets.medium_term.toFixed(2)),1)]),e("div",ie,[t[21]||(t[21]=e("p",{class:"text-sm text-gray-400 mb-2"},"Long Term",-1)),e("p",re,"$"+l(s.value.price_targets.long_term.toFixed(2)),1)]),e("div",ae,[t[22]||(t[22]=e("p",{class:"text-sm text-red-400 mb-2"},"Stop Loss",-1)),e("p",de,"$"+l(s.value.price_targets.stop_loss.toFixed(2)),1)])])]),e("div",ue,[e("div",me,[t[24]||(t[24]=e("h4",{class:"text-lg font-bold mb-4"},"Technical Analysis",-1)),e("p",ce,l(s.value.technical_summary),1)]),e("div",ve,[t[25]||(t[25]=e("h4",{class:"text-lg font-bold mb-4"},"Fundamental Analysis",-1)),e("p",pe,l(s.value.fundamental_summary),1)]),e("div",xe,[t[26]||(t[26]=e("h4",{class:"text-lg font-bold mb-4"},"Sentiment Analysis",-1)),e("p",be,l(s.value.sentiment_summary),1)])]),s.value.position_size_recommendation?(i(),n("div",ge,[t[29]||(t[29]=e("h3",{class:"text-xl font-bold mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})]),c(" Position Size Recommendation ")],-1)),e("div",ye,[e("div",null,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-400 mb-2"},"Recommended Size",-1)),e("p",_e,l(s.value.position_size_recommendation.size_percent??10)+"%",1),e("p",he,"Risk Level: "+l(s.value.position_size_recommendation.risk_level??"MODERATE"),1)]),e("div",null,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-400 mb-2"},"Rationale",-1)),e("p",fe,l(s.value.position_size_recommendation.rationale??"Based on current market conditions and risk assessment"),1)])])])):a("",!0),s.value.top_drivers&&s.value.top_drivers.length>0?(i(),n("div",ke,[t[30]||(t[30]=e("h3",{class:"text-xl font-bold mb-4"},"Top Drivers",-1)),e("div",we,[(i(!0),n(v,null,p(s.value.top_drivers,(o,r)=>(i(),n("div",{key:r,class:"flex items-start gap-4 p-3 rounded-lg bg-white/5"},[e("div",Me,l(r+1),1),e("div",ze,[e("h4",Ae,l(o.factor),1),e("p",Le,l(o.impact),1),e("div",Se,[e("div",Ce,[e("div",{class:"bg-purple-500 h-2 rounded-full transition-all",style:y({width:`${o.weight*100}%`})},null,4)]),e("span",je,l((o.weight*100).toFixed(1))+"%",1)])])]))),128))])])):a("",!0),s.value.key_levels?(i(),n("div",Be,[t[33]||(t[33]=e("h3",{class:"text-xl font-bold mb-4"},"Key Technical Levels",-1)),e("div",Te,[s.value.key_levels.resistance&&s.value.key_levels.resistance.length>0?(i(),n("div",Re,[t[31]||(t[31]=e("h4",{class:"text-sm font-semibold text-red-400 mb-3"},"Resistance Levels",-1)),e("div",Fe,[(i(!0),n(v,null,p(s.value.key_levels.resistance,(o,r)=>(i(),n("div",{key:r,class:"flex items-center justify-between p-2 rounded bg-red-500/10"},[e("span",Ie,"R"+l(r+1),1),e("span",De,"$"+l(Number(o).toFixed(4)),1)]))),128))])])):a("",!0),s.value.key_levels.support&&s.value.key_levels.support.length>0?(i(),n("div",Ee,[t[32]||(t[32]=e("h4",{class:"text-sm font-semibold text-green-400 mb-3"},"Support Levels",-1)),e("div",He,[(i(!0),n(v,null,p(s.value.key_levels.support,(o,r)=>(i(),n("div",{key:r,class:"flex items-center justify-between p-2 rounded bg-green-500/10"},[e("span",Ne,"S"+l(r+1),1),e("span",Ue,"$"+l(Number(o).toFixed(4)),1)]))),128))])])):a("",!0)])])):a("",!0),s.value.catalysts&&s.value.catalysts.length>0?(i(),n("div",Ve,[t[35]||(t[35]=e("h3",{class:"text-xl font-bold mb-4"},"Potential Catalysts",-1)),e("div",$e,[(i(!0),n(v,null,p(s.value.catalysts,(o,r)=>(i(),n("div",{key:r,class:"p-4 rounded-lg bg-white/5 border border-white/10"},[e("div",Pe,[e("h4",Ge,l(o.description),1),e("span",{class:b(["px-2 py-1 rounded text-xs font-semibold",o.probability==="HIGH"?"bg-green-500/20 text-green-400":o.probability==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"])},l(o.probability),3)]),e("div",qe,[e("span",Ke,l(o.type),1),t[34]||(t[34]=e("span",{class:"text-gray-500"},"â€¢",-1)),e("span",Oe,l(o.timeline),1)])]))),128))])])):a("",!0),s.value.evidence_sentences&&s.value.evidence_sentences.length>0?(i(),n("div",We,[t[37]||(t[37]=e("h3",{class:"text-xl font-bold mb-4"},"Evidence & Key Points",-1)),e("ul",Ye,[(i(!0),n(v,null,p(s.value.evidence_sentences,(o,r)=>(i(),n("li",{key:r,class:"flex items-start gap-3"},[t[36]||(t[36]=e("svg",{class:"w-5 h-5 text-purple-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Je,l(o),1)]))),128))])])):a("",!0),e("div",Qe,[t[38]||(t[38]=e("h3",{class:"text-xl font-bold mb-4"},"AI Explanation",-1)),e("p",Xe,l(s.value.explainability_text),1)]),s.value.risk_notes?(i(),n("div",Ze,[t[39]||(t[39]=e("h3",{class:"text-xl font-bold mb-4 text-yellow-400 flex items-center gap-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),c(" Risk Warnings ")],-1)),e("p",et,l(s.value.risk_notes),1)])):a("",!0),e("div",tt,[t[46]||(t[46]=e("h3",{class:"text-lg font-bold mb-4"},"Analysis Metadata",-1)),e("div",st,[e("div",null,[t[40]||(t[40]=e("p",{class:"text-gray-400 mb-1"},"Symbol",-1)),e("p",lt,l(s.value.symbol),1)]),e("div",null,[t[41]||(t[41]=e("p",{class:"text-gray-400 mb-1"},"Instrument Name",-1)),e("p",ot,l(s.value.instrument_name),1)]),e("div",null,[t[42]||(t[42]=e("p",{class:"text-gray-400 mb-1"},"Type",-1)),e("p",nt,l(s.value.instrument_type),1)]),e("div",null,[t[43]||(t[43]=e("p",{class:"text-gray-400 mb-1"},"Time Horizon",-1)),e("p",it,l(s.value.time_horizon),1)]),e("div",null,[t[44]||(t[44]=e("p",{class:"text-gray-400 mb-1"},"Final Score",-1)),e("p",rt,l(s.value.final_score??"N/A"),1)]),e("div",null,[t[45]||(t[45]=e("p",{class:"text-gray-400 mb-1"},"Generated At",-1)),e("p",at,l(f(s.value.created_at)),1)])])])])):a("",!0)])]))}};export{ct as default};
