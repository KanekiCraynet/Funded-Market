import{h as g,o as k,c as n,b as e,l as C,a as M,d as V,w as j,r as B,i as A,F as m,x as b,t as l,q as d,g as i,f as x,A as N,j as z}from"./app-wbJa4e37.js";import{b as H}from"./client-zeXxvwEL.js";const S={class:"min-h-screen"},$={class:"border-b border-white/10 backdrop-blur-lg bg-white/5"},D={class:"container mx-auto px-4 py-4"},L={class:"flex items-center gap-4"},F={class:"container mx-auto px-4 py-8"},I={key:0,class:"card p-8"},P={key:1,class:"card p-8 text-center"},E={key:2,class:"space-y-4"},U=["onClick"],R={class:"grid md:grid-cols-5 gap-6 items-center"},Y={class:"md:col-span-2"},q={class:"flex items-center gap-3 mb-2"},G={class:"text-lg font-semibold"},K={class:"text-sm text-gray-400"},O={class:"flex items-center gap-2 text-sm text-gray-400"},T={class:"text-center"},W={class:"mt-2"},J={class:"text-center"},Q={class:"text-2xl font-bold mb-1"},X={class:"w-full bg-white/10 rounded-full h-2"},Z={class:"flex justify-end"},ee=["onClick"],te={key:0,class:"card mt-6"},se={class:"flex items-center justify-between"},oe={class:"text-sm text-gray-400"},re={class:"flex items-center gap-2"},ne=["disabled"],ie={class:"flex items-center gap-1"},le=["onClick"],ae={key:1,class:"px-2 text-gray-500"},de=["disabled"],he={__name:"HistoryPage",setup(ce){const _=M(),c=g([]),v=g(!0),o=g({current_page:1,last_page:1,per_page:15,total:0});k(async()=>{await u()});async function u(r=1){v.value=!0;try{const t=await H.getHistory({per_page:15,page:r});c.value=Array.isArray(t.data)?t.data:[],t.meta&&(o.value=t.meta)}catch(t){console.error("Failed to fetch history:",t),c.value=[]}finally{v.value=!1}}function w(r){if(!r)return"N/A";try{return new Date(r).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid date"}}function f(r){_.push("/analysis")}function y(){const r=[],t=o.value.current_page,a=o.value.last_page;if(a<=1)return[1];if(a<=7)for(let s=1;s<=a;s++)r.push(s);else{r.push(1),t>3&&r.push("...");const s=Math.max(2,t-1),p=Math.min(a-1,t+1);for(let h=s;h<=p;h++)r.includes(h)||r.push(h);t<a-2&&r.push("..."),r.includes(a)||r.push(a)}return r}return(r,t)=>{const a=B("router-link");return i(),n("div",S,[e("header",$,[e("div",D,[e("div",L,[e("button",{onClick:t[0]||(t[0]=s=>C(_).push("/dashboard")),class:"text-white hover:text-purple-400"},[...t[3]||(t[3]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),t[4]||(t[4]=e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("h1",{class:"text-2xl font-bold"},"Analysis History")],-1))])])]),e("div",F,[v.value?(i(),n("div",I,[...t[5]||(t[5]=[e("div",{class:"flex flex-col items-center space-y-4"},[e("div",{class:"animate-spin w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full"}),e("p",{class:"text-gray-400"},"Loading your analysis history...")],-1)])])):c.value.length===0?(i(),n("div",P,[t[7]||(t[7]=e("svg",{class:"w-16 h-16 text-gray-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})],-1)),t[8]||(t[8]=e("h3",{class:"text-xl font-semibold mb-2"},"No Analysis History",-1)),t[9]||(t[9]=e("p",{class:"text-gray-400 mb-6"},"You haven't generated any analyses yet. Start by analyzing an instrument.",-1)),V(a,{to:"/analysis",class:"btn-primary inline-block"},{default:j(()=>[...t[6]||(t[6]=[x("Generate First Analysis",-1)])]),_:1})])):(i(),n("div",E,[(i(!0),n(m,null,b(c.value,s=>(i(),n("div",{key:s.id,class:"card hover:bg-white/10 transition-all cursor-pointer",onClick:p=>f(s.id)},[e("div",R,[e("div",Y,[e("div",q,[t[10]||(t[10]=e("div",{class:"p-2 bg-purple-500/30 rounded-lg"},[e("svg",{class:"w-5 h-5 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),e("div",null,[e("h3",G,l(s.symbol),1),e("p",K,l(s.instrument_name||"-"),1)])]),e("div",O,[t[11]||(t[11]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),x(" "+l(w(s.created_at)),1)])]),e("div",T,[e("div",{class:d(["inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-semibold",s.recommendation==="BUY"?"bg-green-500/20 text-green-400":s.recommendation==="SELL"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"])},l(s.recommendation),3),e("div",W,[e("span",{class:d(["text-xs px-2 py-1 rounded",s.risk_level==="LOW"?"bg-green-500/20 text-green-400":s.risk_level==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"])},l(s.risk_level)+" RISK",3)])]),e("div",J,[e("div",Q,l((s.confidence*100).toFixed(0))+"%",1),t[12]||(t[12]=e("p",{class:"text-sm text-gray-400 mb-2"},"Confidence",-1)),e("div",X,[e("div",{class:"bg-purple-500 h-2 rounded-full transition-all",style:N({width:`${s.confidence*100}%`})},null,4)])]),e("div",Z,[e("button",{onClick:z(p=>f(s.id),["stop"]),class:"btn-secondary"},[...t[13]||(t[13]=[e("svg",{class:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),x(" View Details ",-1)])],8,ee)])])],8,U))),128)),o.value.last_page>1?(i(),n("div",te,[e("div",se,[e("div",oe," Showing "+l(o.value.from)+" to "+l(o.value.to)+" of "+l(o.value.total)+" results ",1),e("div",re,[e("button",{onClick:t[1]||(t[1]=s=>u(o.value.current_page-1)),disabled:o.value.current_page===1,class:d(["px-4 py-2 rounded-lg transition-colors",o.value.current_page===1?"bg-white/5 text-gray-500 cursor-not-allowed":"bg-white/10 text-white hover:bg-white/20"])}," Previous ",10,ne),e("div",ie,[(i(!0),n(m,null,b(y(),s=>(i(),n(m,{key:s},[s!=="..."?(i(),n("button",{key:0,onClick:p=>u(s),class:d(["w-10 h-10 rounded-lg transition-colors",s===o.value.current_page?"bg-purple-500 text-white":"bg-white/10 text-white hover:bg-white/20"])},l(s),11,le)):(i(),n("span",ae,"..."))],64))),128))]),e("button",{onClick:t[2]||(t[2]=s=>u(o.value.current_page+1)),disabled:o.value.current_page===o.value.last_page,class:d(["px-4 py-2 rounded-lg transition-colors",o.value.current_page===o.value.last_page?"bg-white/5 text-gray-500 cursor-not-allowed":"bg-white/10 text-white hover:bg-white/20"])}," Next ",10,de)])])])):A("",!0)]))])])}}};export{he as default};
